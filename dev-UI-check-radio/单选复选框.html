<!DOCTYPE html>
<html>
<head>
	<title>单选复选框</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="../css/common.css"/>
    <link rel="stylesheet" href="../css/common.check-radio.css"/>
    <link rel="stylesheet" href="../js/plugins/lightcode/prism.css" />
    <script src="../js/jquery.js"></script>
    <script src="../js/core.js"></script>
    <script src="../js/core.check-radio.js"></script>
    <script src="../js/demo.js"></script>
    <style type="text/css">
    #center { width: 80%; margin: 0 auto; font-size: 20px; }
    </style>
</head>
<body>
    <div id="center">
        <p>功能测试</p>
        <div class="card">
            <div class="ui">
                <label class="fruit" role="radiobtn">苹果<input name="fruit" type="radio"/></label>
                <label class="fruit checked" role="radiobtn">香蕉<input name="fruit" type="radio" /></label>
                <label role="radiobtn" class="disabled">汽车<input name="vehicle" type="radio" /></label>
                <label role="radiobtn" class="disabled checked">跑车<input name="vehicle" type="radio" /></label>
                <label role="checkbtn" class="">小<input name="size[]" type="checkbox" checked /></label>
                <label role="checkbtn" class="checked">中<input name="size[]" type="checkbox" /></label>
                <label role="checkbtn" class="disabled">大<input name="size[]" type="checkbox" /></label>
                <label role="checkbtn" class="checked disabled">超大<input name="size[]" type="checkbox" /></label>
            </div>
            <div class="preview-comment">
                <p>需要调用initCheckRadio进行初始化</p>
            </div>
        </div>
        <div>全选/取消</div>
        <div class="card">
            <div class="ui">
                <label role="checkbtn" class="check-all price-count">全选<input name="p[]" type="checkbox"/></label>
                <label class="price-count" role="checkbtn">商品1<input data-price="2.5" name="p[]" type="checkbox"/></label>
                <label class="price-count" role="checkbtn">商品2<input data-price="5" name="p[]" type="checkbox"/></label>
                <label class="price-count" role="checkbtn">商品3<input data-price="12.5" name="p[]" type="checkbox"/></label>
                <label role="checkbtn" class="check-all price-count">全选<input name="p[]" type="checkbox"/></label>
            </div>
            <div class="preview-comment">
                <p>需要调用initCheckRadio进行初始化</p>
                <p>写在一起的复选框有两个全选会出问题 单独写的js没问题 而且更简便</p>
            </div>
        </div>
    </div>
<script type="text/javascript">
//2017-3-20 21:28:14 测试 完成 压力测试中没反应~
//2017-5-3 14:31:33 添加check-all测试
initCheckRadio("[role='radiobtn']");
initCheckRadio("[role='checkbtn']");

$('.fruit').each(function(){
    this.callback = function(input){
        console.log(input);
    }
});
$(".price-count").each(function(){
    //check类型inputs才有意义
    this.callback = function(inputs){
        console.log(inputs);
        var price = 0;
        inputs.each(function(){
            if($(this).attr('checked')==='checked'){
                var p = parseFloat($(this).attr("data-price"));
                if(isNaN(p)) p = 0;
                price += p;
            }
        });
        console.log("勾选的总价是："+price);
    };
});
</script>
<script src="../js/plugins/lightcode/prism.js"></script>
</body>
</html>
